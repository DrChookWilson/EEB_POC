<!--
Design by EEB_POC
email: 
Released under Creative Commons Attribution 2.5 Generic.  
-->


<!DOCTYPE html PUBLIC>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="eeb_poc.css" />
<link href="tabulator-master/dist/css/tabulator.min.css" rel="stylesheet">
<script type="text/javascript" src="tabulator-master/dist/js/tabulator.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.4/fetch.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/2.3.2/jspdf.plugin.autotable.js"></script>

<script type="text/javascript">
    window.TableLoader = {
        tables:{},
        register:function(table, func){
            this.tables[table] = func;
        },
        trigger:function(key){
            var self = this;

            if(this.tables[key]){
                this.tables[key]();
                this.tables[key] = function(){};

                var keys = Object.keys(this.tables);
                var index = keys.indexOf(key);

                if(index){
                    this.tables[keys[index - 1]]();
                    this.tables[keys[index - 1]] = function(){};
                }

                if(index < keys.length - 1){
                    this.tables[keys[index + 1]]();
                    this.tables[keys[index + 1]] = function(){};
                }
            }

            if(key == "theming"){
                var themes = Object.keys(this.tables).slice(-9);

                themes.forEach(function(item){
                    self.trigger(item);
                })
            }
        },
        loadFirst:function(){
            first = Object.keys(this.tables)[0];

            if(first){
                this.trigger(first);
            }
        }
    }
</script>

<title>EEB_POC: Papers of Color database</title>
</head>

<body>
<div id="page">

</div>
<div id="mainPicture">
	<div class="picture">
    	<div id="headerTitle">EEB_POC: database</div>
    </div>
</div>

<p>Test version 3</p><br />

<div id="eeb_poc-table"></div>
var table = new Tabulator("#eeb_poc-table", {
    height:"311px",
    layout:"fitColumns",
    placeholder:"No Data Set",
    columns:[
        {title:"Authors", field:"Authors", sorter:"string", width:200},
        {title:"Title", field:"Title", sorter:"string", width:200},
        {title:"Publication", field:"Publication", sorter:"string",width:50},
        {title:"Volume", field:"Volume", sorter:"number", width:25},
        {title:"Number", field:"Number", sorter:"number", width:25},
        {title:"Pages", field:"Pages", sorter:"number", width:25},
        {title:"Year", field:"Year", sorter:"number", width:25},
        {title:"Keywords", field:"Keywords", sorter:"string", width:100},
        {title:"ORCID", field:"ORCID", sorter:"string", width:50},
        {title:"DOI", field:"DOI", sorter:"string", width:50},
,
    ],
});

//trigger AJAX load on "Load Data via AJAX" button click
$("#ajax-trigger").click(function(){
    table.setData("database/EEB_POC_database.csv");
});